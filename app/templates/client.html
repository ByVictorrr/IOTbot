{% extends "base.html" %}
<!-- Controller fori the robot-->
{% block js %}


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.0.0.js"></script>
    
   <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){

            var socket = io.connect("http://localhost:5000");
            var username = '{{ username }}';
            var password = '{{ password }}';
            var bot_sid;

            /* Descriptions: On connect the server will return a the username(string)*/
            socket.on('connect', function(){
                //socket.emit('message', "user connected");
                console.log("connected");
            });
            /*Description: To get the sid of the bot connected
            $("#connect_bot").on('click',function(){
                socket.emit('connect bot', username);
            });

            Description: Response to connect_bot button gives the sid of the bot
            socket.on('connect bot', function(sid){
                sbot_sid = sid;
            });
            */

            /*Description: sends messages to robot*/
            $("#send_msg").on('click', function(){
                socket.emit('message', [$("#msg").val(), username, password])
            });
            socket.on('message', function(msg){
                $("#messages").append("<p>" + msg + '</p>')
            });
            
            

        });
            
    </script>

{% endblock js %}
{% block content %}
    <form>
        <button id="connect_bot">connect bot</button>
        <input type="text" id="msg">
        <button id="send_msg">sent message to bot</button>

        <ul id="messages"></ul>
    </form>

{% endblock content %}
